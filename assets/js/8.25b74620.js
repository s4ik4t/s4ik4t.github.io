(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{357:function(e,t,n){"use strict";n.r(t);var s=n(43),i=Object(s.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h2",{attrs:{id:"selenium-and-testng"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#selenium-and-testng"}},[e._v("#")]),e._v(" Selenium and TestNG")]),e._v(" "),n("p",[n("em",[e._v("This documentation was written by Felipe Knorr Kuhn and is adapted from "),n("a",{attrs:{href:"https://knorrium.info/2010/08/31/using-testng-to-launch-your-tests-and-the-selenium-server/",target:"_blank",rel:"noopener noreferrer"}},[e._v("a series of articles"),n("OutboundLink")],1),e._v(" posted on "),n("a",{attrs:{href:"https://knorrium.info",target:"_blank",rel:"noopener noreferrer"}},[e._v("his blog"),n("OutboundLink")],1)]),e._v(".")]),e._v(" "),n("h3",{attrs:{id:"content"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#content"}},[e._v("#")]),e._v(" Content")]),e._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"#modeling"}},[e._v("How to use TestNG configuration methods with parameters")])]),e._v(" "),n("li",[n("a",{attrs:{href:"#configuration_methods"}},[e._v("How to configure your test")])]),e._v(" "),n("li",[n("a",{attrs:{href:"#creating_xml"}},[e._v("Creating the XML file for TestNG")])]),e._v(" "),n("li",[n("a",{attrs:{href:"#launching"}},[e._v("Lauching your tests with Eclipse")])]),e._v(" "),n("li",[n("a",{attrs:{href:"#future"}},[e._v("How to make the test design a little better for the future")])])]),e._v(" "),n("h3",{attrs:{id:"modeling-your-test-case"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#modeling-your-test-case"}},[e._v("#")]),e._v(" Modeling your test case")]),e._v(" "),n("p",[e._v("Before writing a test case, you need to know how and what will be validated. Let's use the WordPress "),n("a",{attrs:{href:"https://knorrium.info/2010/05/19/a-java-approach-to-selenium",target:"_blank",rel:"noopener noreferrer"}},[e._v('"Create New Post" test case'),n("OutboundLink")],1),e._v(".")]),e._v(" "),n("ol",[n("li",[e._v("Go to "),n("a",{attrs:{href:"https://demo.opensourcecms.com/wordpress/wp-login.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://demo.opensourcecms.com/wordpress/wp-login.php"),n("OutboundLink")],1)]),e._v(" "),n("li",[e._v('Enter "admin" in the "Username" field')]),e._v(" "),n("li",[e._v('Enter "demo123" in the "Password" field')]),e._v(" "),n("li",[e._v('Click on the "Log In" button')]),e._v(" "),n("li",[e._v('Verify that the text "Howdy, admin" is present')]),e._v(" "),n("li",[e._v('Click on the "Posts" link')]),e._v(" "),n("li",[e._v('Click on the "Add New" button')]),e._v(" "),n("li",[e._v('Type "Selenium Demo Post" in the title field')]),e._v(" "),n("li",[e._v('Click on the "Publish" button')]),e._v(" "),n("li",[e._v('Verify that the text "Post published" is present')])]),e._v(" "),n("p",[e._v("Considering this scenario, the first thing that comes to mind is creating a long test case that goes through all the steps. This might be a good approach if you are writing a manual test case. However, since we are writing an automated test, we want to write our script as modular as possible to be able to reuse parts of it in future scenarios.")]),e._v(" "),n("p",[e._v("This is how I would break down the test:")]),e._v(" "),n("ol",[n("li",[e._v("Launch the WordPress site")]),e._v(" "),n("li",[e._v("Open the Admin Login page")]),e._v(" "),n("li",[e._v("Enter valid login data")]),e._v(" "),n("li",[e._v("Navigate to the Write Post page")]),e._v(" "),n("li",[e._v("Write the post")]),e._v(" "),n("li",[e._v("Publish the post")]),e._v(" "),n("li",[e._v("Verify that it was actually post")])]),e._v(" "),n("p",[e._v("Keep in mind that this is just an example. You are free to model your tests in any way you want, as long as they have business value and will validate your business logic.")]),e._v(" "),n("p",[e._v("Let's see how to do that with actual Java code:")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('@Test(description="Launches the WordPress site")\npublic void launchSite(){\n  selenium.open("");\n  selenium.waitForPageToLoad("30000");\n  assertEquals(selenium.getTitle(), "Demo | Just another WordPress site");\n}\n \n@Test(description="Navigates to the admin page")\n  public void openAdminPage() {\n  selenium.open("wp-admin");\n  selenium.waitForPageToLoad("30000");\n  assertEquals(selenium.getTitle(), "Demo › Log In");\n}\n \n@Test(description="Enters valid login data")\n  public void loginAsAdmin() {\n  selenium.type("user\\_login", "admin");\n  selenium.type("user\\_pass", "demo123");\n  selenium.click("wp-submit");\n  selenium.waitForPageToLoad("30000");\n  assertTrue(selenium.isTextPresent("Howdy, admin"));\n}\n \n@Test(description="Navigates to the New Post screen")\npublic void navigateNewPost() {\n  selenium.click("//a\\[contains(text(),\'Posts\')\\]/following::a\\[contains(text(),\'Add New\')\\]\\[1\\]");\n  selenium.waitForPageToLoad("30000");\n  assertTrue(selenium.isTextPresent("Add New Post"));\n}\n \n@Test(description="Writes the new post")\npublic void writeBlogPost() {\n  selenium.type("title", "New Blog Post");\n  selenium.click("edButtonHTML");\n  selenium.type("content", "This is a new post");\n  //TODO:Assert\n}\n \n@Test(description="Publishes the post")\npublic void publishBlogPost() {\n  selenium.click("submitdiv");\n  selenium.click("publish");\n  selenium.waitForPageToLoad("30000");\n  assertTrue(selenium.isTextPresent("Post published."));\n}\n \n@Test(description="Verifies the post")\npublic void verifyBlogPost() {\n  selenium.click("//a\\[contains(text(),\'Posts\') and contains(@class,\'wp-first-item\')\\]");\n  selenium.waitForPageToLoad("30000");\n  assertTrue(selenium.isElementPresent("//a\\[text()=\'New Blog Post\'\\]"));\n}\n \n@Test(description="Logs out")\npublic void logout() {\n  selenium.click("//a\\[text()=\'Log Out\'\\]");\n  //TODO:Assert\n}\n')])])]),n("p",[e._v("These are the test methods (or steps) we are going to use.")]),e._v(" "),n("h3",{attrs:{id:"configuration-methods"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#configuration-methods"}},[e._v("#")]),e._v(" Configuration methods")]),e._v(" "),n("p",[e._v("If you are familiar with unit testing frameworks, you probably know about the setup and teardown methods. TestNG goes beyond that idea and allows you to define methods that will be run after or before your test suites, test groups or test methods. This is very useful for our Selenium tests because you can create a Selenium server and browser instance before you start running your test suite.)")]),e._v(" "),n("p",[e._v("To achieve this, we will use two TestNG "),n("RouterLink",{attrs:{to:"/documentation-main.html#annotations"}},[e._v("annotations")]),e._v(": @BeforeSuite and @AfterSuite:")],1),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('@BeforeSuite(alwaysRun = true)\npublic void setupBeforeSuite(ITestContext context) {\n  String seleniumHost = context.getCurrentXmlTest().getParameter("selenium.host");\n  String seleniumPort = context.getCurrentXmlTest().getParameter("selenium.port");\n  String seleniumBrowser = context.getCurrentXmlTest().getParameter("selenium.browser");\n  String seleniumUrl = context.getCurrentXmlTest().getParameter("selenium.url");\n \n  RemoteControlConfiguration rcc = new RemoteControlConfiguration();\n  rcc.setSingleWindow(true);\n  rcc.setPort(Integer.parseInt(seleniumPort));\n \n  try {\n    server = new SeleniumServer(false, rcc);\n    server.boot();\n  } catch (Exception e) {\n    throw new IllegalStateException("Can\'t start selenium server", e);\n  }\n \n  proc = new HttpCommandProcessor(seleniumHost, Integer.parseInt(seleniumPort),\n      seleniumBrowser, seleniumUrl);\n  selenium = new DefaultSelenium(proc);\n  selenium.start();\n}\n \n@AfterSuite(alwaysRun = true)\npublic void setupAfterSuite() {\n  selenium.stop();\n  server.stop();\n}\n')])])]),n("p",[e._v("PS: Did you notice those weird parameters? They are stored in the XML file (we are going to see in the next section) and accessed by a ITestContext object, which was "),n("RouterLink",{attrs:{to:"/documentation-main.html#dependency-injection"}},[e._v("injected")]),e._v(".")],1),e._v(" "),n("p",[e._v("By adding these annotations, the TestNG engine will invoke the configuration methods automatically before/after your test suite (make sure the test methods are annotated with @Test), launching the Selenium server and instantiating the Selenium client object only once, reusing the same browser session across the tests.")]),e._v(" "),n("h3",{attrs:{id:"creating-the-xml-file"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#creating-the-xml-file"}},[e._v("#")]),e._v(" Creating the XML file")]),e._v(" "),n("p",[e._v("To define the order of the tests, we will have to create an XML file listing the test methods we would like to run. Make sure that the test methods are annotated with @Test, or else the TestNG engine will not invoke them.")]),e._v(" "),n("p",[e._v("Before TestNG 5.13.1, you had to use Method Interceptors if you wanted to run the tests in the order defined in the XML file. I have posted "),n("a",{attrs:{href:"https://gist.github.com/416310",target:"_blank",rel:"noopener noreferrer"}},[e._v("my implementation of a Method Interceptor"),n("OutboundLink")],1),e._v(" on my Github account. From TestNG 5.13.1+, you can just add the preserve-order parameter to your test tag and include the methods you would like to run, reducing unnecessary code in your test suite.")]),e._v(" "),n("p",[e._v("Here is the XML file:")]),e._v(" "),n("parameter",{attrs:{name:"selenium.host",value:"localhost"}}),e._v(" "),n("parameter",{attrs:{name:"selenium.port",value:"3737"}}),e._v(" "),n("parameter",{attrs:{name:"selenium.browser",value:"\\*firefox"}}),e._v(" "),n("parameter",{attrs:{name:"selenium.url",value:"https://demo.opensourcecms.com/wordpress/"}}),e._v(" "),n("include",{attrs:{name:"launchSite"}}),e._v(" "),n("include",{attrs:{name:"openAdminPage"}}),e._v(" "),n("include",{attrs:{name:"loginAsAdmin"}}),e._v(" "),n("include",{attrs:{name:"navigateNewPost"}}),e._v(" "),n("include",{attrs:{name:"writeBlogPost"}}),e._v(" "),n("include",{attrs:{name:"publishBlogPost"}}),e._v(" "),n("include",{attrs:{name:"verifyBlogPost"}}),e._v(" "),n("h3",{attrs:{id:"launching-your-tests-in-eclipse"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#launching-your-tests-in-eclipse"}},[e._v("#")]),e._v(" Launching your tests in Eclipse")]),e._v(" "),n("p",[e._v("We finished writing our tests, now how can we run them?")]),e._v(" "),n("p",[e._v("You can launch TestNG from the command line, using a Eclipse plugin or even programatically. We are going to use the Eclipse plugin. Follow the steps described on the official TestNG documentation "),n("RouterLink",{attrs:{to:"/download.html"}},[e._v("over here")])],1),e._v(" "),n("p",[e._v("If you installed TestNG correctly, you will see this menu when you right click on the XML file:")]),e._v(" "),n("p",[n("a",{attrs:{href:"pics/testNG-run.png"}},[n("img",{attrs:{src:"pics/testNG-run.png",alt:"",title:"testNG-run"}})])]),e._v(" "),n("p",[e._v("Click on “Run as TestNG Suite” and your test will start running. You will then see this nice results tree:")]),e._v(" "),n("p",[n("a",{attrs:{href:"pics/testNG-exec.png"}},[n("img",{attrs:{src:"pics/testNG-exec.png",alt:"",title:"testNG-exec"}})])]),e._v(" "),n("h3",{attrs:{id:"thinking-about-the-future"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#thinking-about-the-future"}},[e._v("#")]),e._v(" Thinking about the future")]),e._v(" "),n("p",[e._v("If you really want to think about the future of your test suite, I would recommend you to read "),n("a",{attrs:{href:"https://adam.goucher.ca/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Adam"),n("OutboundLink")],1),e._v(" "),n("a",{attrs:{href:"https://twitter.com/adamgoucher",target:"_blank",rel:"noopener noreferrer"}},[e._v("Goucher’s"),n("OutboundLink")],1),e._v(" "),n("a",{attrs:{href:"https://www.pragprog.com/magazines",target:"_blank",rel:"noopener noreferrer"}},[e._v("article"),n("OutboundLink")],1),e._v(" published on PragPub. He talks about Selenium 2 and the Page Objects Model (a very nice way to model your tests, especially if you use Selenium 2).")]),e._v(" "),n("p",[e._v("Since there are lots of people still using Selenium 1, I'll stick to that for a while, but Selenium 2 will eventually be covered here.")]),e._v(" "),n("p",[e._v("As the number of tests in your test suite grows, you will find that grouping them in different test classes is a good idea. If you do that, you can take advantage of object oriented programming and create a new class named BaseTest (for example), and leave your configuration logic there. That way, every test class must extend the BaseTest class and use static attributes.")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('public class WordPressAdmin extends BaseTest {\n@Test\npublic void test1(){\n  selenium.open("");\n  //...\n}\n\n@Test\npublic void test2(){\n  selenium.open("");\n  //...\n}\n}\n')])])]),n("p",[e._v("This is better than leaving your configuration methods in the test class.")])],1)}),[],!1,null,null,null);t.default=i.exports}}]);